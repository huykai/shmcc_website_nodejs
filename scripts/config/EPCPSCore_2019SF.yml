# EPSPS_core_KPI_SHMCC template 
EXCEL_MODEL : "./scripts/EPSPS_core_KPI_SHMCC.xlsx"
EXCEL_FILENAME : "副本PS_core_KPI_SHMCC"
EXCEL_DOWNLOAD_URL: "../downloads/"
EXCEL_PARAMS: 
    - item: "date"
      values: 
        - datasource: params"    
          datavalue: "year"
        - datasource: "params"    
          datavalue: "month"
        - datasource: "params"    
          datavalue: "day"
        - datasource: "params"    
          datavalue: "hour"
        - datasource: "params"    
          datavalue": "minute"
      outputformats:
        - type: "data"
          value: "1"
        - type: "data"
          value: "2"
        - type: "data"
          value: "3"
        - type: "data"
          value: "4"
        - type: "data"
          value: "5"
      outputlocation: "A3"
SHEETS: 
    - SHEETNAME: "MME"
      MME_KPI:
        - item: "MMEPERIADTIME"
          values: 
          - datasource: "sql"    
            sql_function: "MME-REPORTSUITE"
            sql_template: "MMEUsers"
            sql_selectitem_index: "1"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10"] 
        - item: "MMEAVGUSER"
          values: 
          - datasource: "sql"    
            sql_function: "MME-REPORTSUITE"
            sql_template: "MMEUsers"
            sql_selectitem_index: "5"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["E3", "E4", "E5", "E6", "E7", "E8", "E9", "E10"]
        - item: "MMEMAXUSER"
          values: 
          - datasource: "sql"    
            sql_function: "MME-REPORTSUITE"
            sql_template: "MMEUsers"
            sql_selectitem_index: "6"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["F3", "F4", "F5", "F6", "F7", "F8", "F9", "F10"]
        - item: "MMEAVGBEARER"
          values: 
          - datasource: "sql"    
            sql_function: "MME-REPORTSUITE"
            sql_template: "MMEUsers"
            sql_selectitem_index: "7"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["H3", "H4", "H5", "H6", "H7", "H8", "H9", "H10"]
        - item: "MMEMAXBEARER"
          values: 
          - datasource: "sql"    
            sql_function: "MME-REPORTSUITE"
            sql_template: "MMEUsers"
            sql_selectitem_index: "8"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["I3", "I4", "I5", "I6", "I7", "I8", "I9", "I10"]
        - item: "MMEAVGVOLTEUSER"
          values: 
          - datasource: "sql"    
            sql_function: "MME-REPORTSUITE"
            sql_template: "MMEUsers"
            sql_selectitem_index: "9"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["K3", "K4", "K5", "K6", "K7", "K8", "K9", "K10"] 
        - item: "MMEMAXVOLTEUSER"
          values: 
          - datasource: "sql"    
            sql_function: "MME-REPORTSUITE"
            sql_template: "MMEUsers"
            sql_selectitem_index: "10"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["L3", "L4", "L5", "L6", "L7", "L8", "L9", "L10"] 
        - item: "MMEAVGCPPULOAD"
          values: 
          - datasource: "sql"    
            sql_function: "MME-REPORTSUITE"
            sql_template: "MMEUsers"
            sql_selectitem_index: "11"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["M3", "M4", "M5", "M6", "M7", "M8", "M9", "M10"] 
        - item: "MMEMAXCPPULOAD"
          values: 
          - datasource: "sql"    
            sql_function: "LTE-CPU"
            sql_selectitem_index: "6"
            sql_extra: 
              valuefilter: 
                filter_index: "4"
                filter_regex: "CPPU"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["N3", "N4", "N5", "N6", "N7", "N8", "N9", "N10"] 
        - item: "MMEAVGMMDULOAD"
          values: 
          - datasource: "sql"    
            sql_function: "MME-REPORTSUITE"
            sql_template: "MMEUsers"
            sql_selectitem_index: "12"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["O3", "O4", "O5", "O6", "O7", "O8", "O9", "O10"] 
        - item: "MMEMAXMMDULOAD"
          values: 
          - datasource: "sql"    
            sql_function: "LTE-CPU"
            sql_selectitem_index: "6"
            sql_extra: 
              valuefilter: 
                filter_index: "4"
                filter_regex: "MMDU"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["P3", "P4", "P5", "P6", "P7", "P8", "P9", "P10"] 
    - SHEETNAME: "SAEGW"
      SAEGW_KPI: 
        - item: "SAEGWPERIADTIME"
          values: 
          - datasource: "sql"    
            sql_function: "SAEGW-REPORTSUITE"
            sql_template: "SAEGWBearers"
            sql_selectitem_index: "1"
          outputformats: 
            - type: "data"
              value: "1"
          outputlocation: ["A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10"] 
        - item: "SAEGWAVGPGWBEARER"
          values: 
            - datasource: "sql"    
              sql_function: "SAEGW-REPORTSUITE"
              sql_template: "SAEGWBearers"
              sql_selectitem_index: "6"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["E3", "E4", "E5", "E6", "E7", "E8", "E9", "E10", "E11", "E12"]
        - item: "SAEGWMAXPGWBEARER"
          values: 
            - datasource: "sql"    
              sql_function: "LTE-PGW"
              sql_selectitem_index: "6"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["F3", "F4", "F5", "F6", "F7", "F8", "F9", "F10", "F11", "F12"]
        - item: "SAEGWAVGDEDBEARER"
          values: 
            - datasource: "sql"    
              sql_function: "SAEGW-REPORTSUITE"
              sql_template: "SAEGWBearers"
              sql_selectitem_index: "16"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["H3", "H4", "H5", "H6", "H7", "H8", "H9", "H10", "H11", "H12"]
        - item: "SAEGWMAXDEDBEARER"
          values: 
            - datasource: "sql"    
              sql_function: "LTE-PGW"
              sql_selectitem_index: "10"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["I3", "I4", "I5", "I6", "I7", "I8", "I9", "I10", "I11", "I12"]
        - item: "SAEGWAVGSGWBEARER"
          values: 
            - datasource: "sql"    
              sql_function: "SAEGW-REPORTSUITE"
              sql_template: "SAEGWBearers"
              sql_selectitem_index: "8"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["K3", "K4", "K5", "K6", "K7", "K8", "K9", "K10", "K11", "K12"]
        - item: "SAEGWMAXSGWBEARER"
          values: 
            - datasource: "sql"    
              sql_function: "LTE-SGW"
              sql_selectitem_index: "7"
            - datasource: "sql"    
              sql_function: "LTE-PGW"
              sql_selectitem_index: "5"
            - datasource: "evaldata"
              value: "(${1} + ${2})"
          outputformats:
            - type: "data"
              value: "3"
          outputlocation: ["L3", "L4", "L5", "L6", "L7", "L8", "L9", "L10", "L11", "L12"]
        - item: "SAEGWAVGPGWTHROUGH"
          values: 
            - datasource: "sql"    
              sql_function: "SAEGW-REPORTSUITE"
              sql_template: "SAEGWBearers"
              sql_selectitem_index: "10"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["N3", "N4", "N5", "N6", "N7", "N8", "N9", "N10", "N11", "N12"]
        - item: "SAEGWMAXPGWTHROUGH"
          values: 
            - datasource: "sql"    
              sql_function: "SAEGW-REPORTSUITE"
              sql_template: "SAEGWBearers"
              sql_selectitem_index: "11"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["O3", "O4", "O5", "O6", "O7", "O8", "O9", "O10", "O11", "O12"]
        - item: "SAEGWAVGSBCPU"
          values: 
            - datasource: "sql"    
              sql_function: "SAEGW-REPORTSUITE"
              sql_template: "SAEGWBearers"
              sql_selectitem_index: "12"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["P3", "P4", "P5", "P6", "P7", "P8", "P9", "P10", "P11", "P12"] 
        - item: "SAEGWMAXSBCPU"
          values: 
            - datasource: "sql"    
              sql_function: "SAEGW-REPORTSUITE"
              sql_template: "SAEGWBearers"
              sql_selectitem_index: "13"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["Q3", "Q4", "Q5", "Q6", "Q7", "Q8", "Q9", "Q10", "Q11", "Q12"] 
        - item: "SAEGWAVGSABCPU"
          values: 
            - datasource: "sql"    
              sql_function: "SAEGW-REPORTSUITE"
              sql_template: "SAEGWBearers"
              sql_selectitem_index: "14"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["R3", "R4", "R5", "R6", "R7", "R8", "R9", "R10", "R11", "R12"]  
        - item: "SAEGWMAXSABCPU"
          values: 
            - datasource: "sql"    
              sql_function: "SAEGW-REPORTSUITE"
              sql_template: "SAEGWBearers"
              sql_selectitem_index: "15"
          outputformats:
            - type: "data"
              value: "1"
          outputlocation: ["S3", "S4", "S5", "S6", "S7", "S8", "S9", "S10", "S11", "S12"]  
      CMG_KPI: 
      - item: "CMGPERIADTIME"
        values: 
        - datasource: "sql"    
          sql_function: "CMG-REPORTSUITE"
          sql_template: "CMGUsers"
          sql_selectitem_index: "1"
        outputformats: 
          - type: "data"
            value: "1"
        outputlocation: ["A11", "A12", "A13", "A14", "A15", "A16"] 
      - item: "CMGDEVICE"
        values: 
        - datasource: "sql"    
          sql_function: "LTE-PGW"
          sql_selectitem_index: "1"
        outputformats: 
          - type: "data"
            value: "1"
        outputlocation: ["C11", "C12", "C13", "C14", "C15", "C16"] 
      - item: "CMGAVGPGWBEARER"
        values: 
          - datasource: "sql"    
            sql_function: "LTE-PGW"
            sql_selectitem_index: "7"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["E11", "E12", "E13", "E14", "E15", "E16"] 
      - item: "CMGMAXPGWBEARER"
        values: 
          - datasource: "sql"    
            sql_function: "LTE-PGW"
            sql_selectitem_index: "5"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["F11", "F12", "F13", "F14", "F15", "F16"] 
      - item: "CMGAVGDEDBEARER"
        values: 
          - datasource: "sql"    
            sql_function: "LTE-PGW"
            sql_selectitem_index: "11"
          - datasource: "sql"    
            sql_function: "LTE-SGW"
            sql_selectitem_index: "8"
          - datasource: "evaldata"
            value: "(${1} + ${2})"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["H11", "H12", "H13", "H14", "H15", "H16"] 
      - item: "CMGMAXDEDBEARER"
        values: 
          - datasource: "sql"    
            sql_function: "LTE-PGW"
            sql_selectitem_index: "12"
          - datasource: "sql"    
            sql_function: "LTE-SGW"
            sql_selectitem_index: "9"
          - datasource: "evaldata"
            value: "(${1} + ${2})"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["I11", "I12", "I13", "I14", "I15", "I16"] 
      - item: "CMGAVGSGWBEARER"
        values: 
          - datasource: "sql"    
            sql_function: "LTE-SGW"
            sql_selectitem_index: "4"
          - datasource: "sql"    
            sql_function: "LTE-PGW"
            sql_selectitem_index: "9"
          - datasource: "evaldata"
            value: "(${1} + ${2})"
        outputformats:
          - type: "data"
            value: "3"
        outputlocation: ["K11", "K12", "K13", "K14", "K15", "K16"] 
      - item: "CMGMAXSGWBEARER"
        values: 
          - datasource: "sql"    
            sql_function: "LTE-SGW"
            sql_selectitem_index: "6"
          - datasource: "sql"    
            sql_function: "LTE-PGW"
            sql_selectitem_index: "10"
          - datasource: "evaldata"
            value: "(${1} + ${2})"
        outputformats:
          - type: "data"
            value: "3"
        outputlocation: ["L11", "L12", "L13", "L14", "L15", "L16"] 
      - item: "CMGAVGPGWTHROUGH"
        values: 
          - datasource: "sql"    
            sql_function: "CMG-REPORTSUITE"
            sql_template: "CMGUsers"
            sql_selectitem_index: "6"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["N11", "N12", "N13", "N14", "N15", "N16"] 
      - item: "CMGMAXPGWTHROUGH"
        values: 
          - datasource: "sql"    
            sql_function: "CMG-REPORTSUITE"
            sql_template: "CMGUsers"
            sql_selectitem_index: "7"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["O11", "O12", "O13", "O14", "O15", "O16"] 
      RTM_KPI: 
      - item: "CMGAVGMGCPU"
        values: 
          - datasource: "rtm"    
            host: ["SHSAEGW05BNK", "SHSAEGW06BNK", "SHSAEGW34BNK", "SHSAEGW35BNK", "SHSAEGW36BNK", "SHSAEGW37BNK"]    
            itemname: "AVGMGCPU"
            valueindex: "avg"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["P11", "P12", "P13", "P14", "P15", "P16"] 
      - item: "CMGMAXMGCPU"
        values: 
          - datasource: "rtm"    
            host: ["SHSAEGW05BNK", "SHSAEGW06BNK", "SHSAEGW34BNK", "SHSAEGW35BNK", "SHSAEGW36BNK", "SHSAEGW37BNK"]    
            itemname: "MaxMGCPU"
            valueindex: "max"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["Q11", "Q12", "Q13", "Q14", "Q15", "Q16"] 
      - item: "CMGAVGLBCPU"
        values: 
          - datasource: "rtm"    
            host: ["SHSAEGW05BNK", "SHSAEGW06BNK", "SHSAEGW34BNK", "SHSAEGW35BNK", "SHSAEGW36BNK", "SHSAEGW37BNK"]    
            itemname: "AVGLBCPU"
            valueindex: "avg"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["R11", "R12", "R13", "R14", "R15", "R16"] 
      - item: "CMGMAXSABCPU"
        values: 
          - datasource: "rtm"    
            host: ["SHSAEGW05BNK", "SHSAEGW06BNK", "SHSAEGW34BNK", "SHSAEGW35BNK", "SHSAEGW36BNK", "SHSAEGW37BNK"]    
            itemname: "MaxLBCPU"
            valueindex: "max"
        outputformats:
          - type: "data"
            value: "1"
        outputlocation: ["S11", "S12", "S13", "S14", "S15", "S16"] 
SQLCUSTOM: 
    "MMEUsers": 
      "temp_table": 
        - "jf_load_ext_2366093417"
        - "jf_ULOAD_ext_2320338196"
        - "jf_MULM_2310062164"
        - "jf_ALLTABLES_2326660856"
      "create_temptable": 
        - >
            create global temporary table jf_load_ext_2366093417 on commit preserve rows as
            select
            a.period_start_time,
                    a.flexins_gid,
            SUM(ave_load_rate_den_mmdu) ave_load_rate_den_mmdu,
                    SUM(ave_load_rate_sum_mmdu) ave_load_rate_sum_mmdu
            from
                    (
            select
                    trunc( p.period_start_time, 'hh24' ) period_start_time,
                    "flexins".co_gid flexins_gid,
                    p.cu cu,
                    p.index_id index_id,
                    SUM(decode(CU,'MMDU',decode(object_state,0,ave_load_rate_den,0),0)) ave_load_rate_den_mmdu,
                    SUM(decode(CU,'MMDU',decode(object_state,0,ave_load_rate_sum,0),0)) ave_load_rate_sum_mmdu
                    from
                    
                        utp_common_objects "plmn",
                        utp_common_objects "flexins",
                    pcofns_ps_load_INDEX_raw p
                    where
                    "plmn".co_gid in ( '100000' ) 
                    and period_start_time >= to_date('2019/01/22 15:17:00', 'yyyy/mm/dd hh24:mi:ss')
                    and period_start_time < to_date('2019/01/23 15:17:00', 'yyyy/mm/dd hh24:mi:ss')
                    and "plmn".co_oc_id = 16
                    and "flexins".co_gid = p.fins_id
                    and "flexins".co_parent_gid = "plmn".co_gid
                    and "flexins".co_oc_id = 3766
                    group by
                    trunc( p.period_start_time, 'hh24' ),
                    "flexins".co_gid,
                    p.cu,
                    p.index_id
            ) a
            group by
            a.period_start_time,
                    a.flexins_gid
        - >
            create global temporary table jf_ULOAD_ext_2320338196 on commit preserve rows as
            select
            a.period_start_time,
                    a.flexins_gid,
            avg(CPPU_CPU_avg) CPPU_CPU_avg
            from
                    (
            select
                    trunc( p.period_start_time, 'hh24' ) period_start_time,
                    "flexins".co_gid flexins_gid,
                    p.unit_id unit_id,
                    avg ( CASE WHEN UNIT_ID LIKE '%CPPU%' THEN COMP_AVERAGE_LOAD ELSE NULL END ) CPPU_CPU_avg
                    from
                    
                        utp_common_objects "plmn",
                        utp_common_objects "flexins",
                    pcofns_ps_uload_unit1_raw p
                    where
                    "plmn".co_gid in ( '100000' ) 
                    and period_start_time >= to_date('2019/01/22 15:17:00', 'yyyy/mm/dd hh24:mi:ss')
                    and period_start_time < to_date('2019/01/23 15:17:00', 'yyyy/mm/dd hh24:mi:ss')
                    and "plmn".co_oc_id = 16
                    and "flexins".co_gid = p.fins_id
                    and "flexins".co_parent_gid = "plmn".co_gid
                    and "flexins".co_oc_id = 3766
                    group by
                    trunc( p.period_start_time, 'hh24' ),
                    "flexins".co_gid,
                    p.unit_id
            ) a
            group by
            a.period_start_time,
                    a.flexins_gid
        - >
            create global temporary table jf_MULM_2310062164 on commit preserve rows as
            select
            a.period_start_time,
                    a.flexins_gid,
            SUM(EPS_MMDU_EMM_REG_SUM) EPS_MMDU_EMM_REG_SUM,
                    AVG(EPS_MMDU_EMM_REG_DENOM) EPS_MMDU_EMM_REG_DENOM,
                    SUM(EPS_MMDU_EMM_REG_MAX) EPS_MMDU_EMM_REG_MAX,
                    SUM(EPS_BEARER_DEDICATED_NBR_SUM) EPS_BEARER_DEDICATED_NBR_SUM,
                    AVG(EPS_BEARER_DEDICATED_NBR_DEN) EPS_BEARER_DEDICATED_NBR_DEN,
                    SUM(EPS_BEARER_DEDICATED_NBR_MAX) EPS_BEARER_DEDICATED_NBR_MAX,
                    SUM(EPS_BEARER_DEFAULT_NBR_SUM) EPS_BEARER_DEFAULT_NBR_SUM,
                    AVG(EPS_BEARER_DEFAULT_NBR_DEN) EPS_BEARER_DEFAULT_NBR_DEN,
                    SUM(EPS_BEARER_DEFAULT_NBR_MAX) EPS_BEARER_DEFAULT_NBR_MAX,
                    SUM(EPS_VOLTE_USER_SUM) EPS_VOLTE_USER_SUM,
                    AVG(EPS_VOLTE_USER_DENOM) EPS_VOLTE_USER_DENOM,
                    SUM(EPS_VOLTE_USER_MAX) EPS_VOLTE_USER_MAX
            from
                    (
            select
                    trunc( p.period_start_time, 'hh24' ) period_start_time,
                    "flexins".co_gid flexins_gid,
                    p.mmdu_id mmdu_id,
                    SUM(EPS_MMDU_EMM_REG_SUM) EPS_MMDU_EMM_REG_SUM,
                    SUM(EPS_MMDU_EMM_REG_DENOM) EPS_MMDU_EMM_REG_DENOM,
                    ROUND(SUM(EPS_MMDU_EMM_REG_MAX)/4,0) EPS_MMDU_EMM_REG_MAX,
                    SUM(EPS_BEARER_DEDICATED_NBR_SUM) EPS_BEARER_DEDICATED_NBR_SUM,
                    SUM(EPS_BEARER_DEDICATED_NBR_DEN) EPS_BEARER_DEDICATED_NBR_DEN,
                    ROUND(SUM(EPS_BEARER_DEDICATED_NBR_MAX)/4,0) EPS_BEARER_DEDICATED_NBR_MAX,
                    SUM(EPS_BEARER_DEFAULT_NBR_SUM) EPS_BEARER_DEFAULT_NBR_SUM,
                    SUM(EPS_BEARER_DEFAULT_NBR_DEN) EPS_BEARER_DEFAULT_NBR_DEN,
                    ROUND(SUM(EPS_BEARER_DEFAULT_NBR_MAX)/4,0) EPS_BEARER_DEFAULT_NBR_MAX,
                    SUM(EPS_VOLTE_USER_SUM) EPS_VOLTE_USER_SUM,
                    SUM(EPS_VOLTE_USER_DENOM) EPS_VOLTE_USER_DENOM,
                    ROUND(SUM(EPS_VOLTE_USER_MAX)/4,0) EPS_VOLTE_USER_MAX
                    from
                    
                        utp_common_objects "plmn",
                        utp_common_objects "flexins",
                    pcofns_ps_mulm_mmdu_raw p
                    where
                    "plmn".co_gid in ( '100000' ) 
                    and period_start_time >= to_date('2019/01/22 15:17:00', 'yyyy/mm/dd hh24:mi:ss')
                    and period_start_time < to_date('2019/01/23 15:17:00', 'yyyy/mm/dd hh24:mi:ss')
                    and "plmn".co_oc_id = 16
                    and "flexins".co_gid = p.fins_id
                    and "flexins".co_parent_gid = "plmn".co_gid
                    and "flexins".co_oc_id = 3766
                    group by
                    trunc( p.period_start_time, 'hh24' ),
                    "flexins".co_gid,
                    p.mmdu_id
            ) a
            group by
            a.period_start_time,
                    a.flexins_gid
        - >
            create global temporary table jf_ALLTABLES_2326660856 on commit preserve rows as
            select
            period_start_time,
            flexins_gid
            from
            (
                (
                select
                    period_start_time, TO_CHAR(flexins_gid) flexins_gid
                from
                    jf_MULM_2310062164
                )
            UNION
                (
                select
                    period_start_time, TO_CHAR(flexins_gid) flexins_gid
                from
                    jf_ULOAD_ext_2320338196
                )
            UNION
                (
                select
                    period_start_time, TO_CHAR(flexins_gid) flexins_gid
                from
                    jf_load_ext_2366093417
                )
            ) p
      "select_temptable": >
            select
                    to_char(ALLTABLES.period_start_time, 'yyyymmddhh24miss') period_start_time,
                    nvl("flexins".co_name, nvl("flexins".co_object_instance, 'NN('||"flexins".co_gid||')')) "FLEXINS name",
                    ALLTABLES.flexins_gid, nvl("flexins".co_ext_dn, "flexins".co_dn) "DN",
                    round(to_number(decode( ((MULM.EPS_MMDU_EMM_REG_DENOM)),0,NULL, ((MULM.EPS_MMDU_EMM_REG_SUM)) / ((MULM.EPS_MMDU_EMM_REG_DENOM)))),0) flns_5035a,
                    to_number(EPS_MMDU_EMM_REG_MAX) flns_5035a1,
                    round(to_number(decode(MULM.EPS_BEARER_DEDICATED_NBR_DEN, 0, null, MULM.EPS_BEARER_DEDICATED_NBR_SUM / MULM.EPS_BEARER_DEDICATED_NBR_DEN) + decode(MULM.EPS_BEARER_DEFAULT_NBR_DEN, 0, null, MULM.EPS_BEARER_DEFAULT_NBR_SUM / MULM.EPS_BEARER_DEFAULT_NBR_DEN)),0) flns_5050a,
                    to_number(EPS_BEARER_DEDICATED_NBR_MAX + EPS_BEARER_DEFAULT_NBR_MAX) flns_5035a2,
                    round(to_number(decode( (MULM.EPS_VOLTE_USER_DENOM), 0, NULL, (MULM.EPS_VOLTE_USER_SUM) / (MULM.EPS_VOLTE_USER_DENOM))),0) flns_5055a,
                    to_number(EPS_VOLTE_USER_MAX) flns_5035a3,
                    round(to_number(uload_ext.CPPU_CPU_avg/10),2) flns_3179a,
                    round(to_number(decode( (load_ext.ave_load_rate_den_mmdu),0,NULL, (load_ext.ave_load_rate_sum_mmdu) / (load_ext.ave_load_rate_den_mmdu))),2) flns_2377a
                from
                    utp_common_objects "flexins",
                jf_ALLTABLES_2326660856 ALLTABLES,
                jf_MULM_2310062164 MULM,
                jf_ULOAD_ext_2320338196 ULOAD_ext,
                jf_load_ext_2366093417 load_ext
                where
                    ALLTABLES.flexins_gid = "flexins".co_gid
                    and ALLTABLES.period_start_time = MULM.period_start_time (+) and ALLTABLES.flexins_gid = MULM.flexins_gid (+) 
                    and ALLTABLES.period_start_time = ULOAD_ext.period_start_time (+) and ALLTABLES.flexins_gid = ULOAD_ext.flexins_gid (+) 
                    and ALLTABLES.period_start_time = load_ext.period_start_time (+) and ALLTABLES.flexins_gid = load_ext.flexins_gid (+) 

                    
                order by
                    2,1,3
    "SAEGWBearers":
      "temp_table": 
        - "jf_GTPU_2339105747"
        - "jf_SGWP_2320895304"
        - "jf_OVLD_ext3_2323103242"
        - "jf_SSPROF_23120406"
        - "jf_URPL_ext_2378625297"
        - "jf_ALLTABLES_2322955188"
      "create_temptable": 
        - >
            create global temporary table jf_GTPU_2339105747 on commit preserve rows as
              select
            a.period_start_time,
                    a.fing_gid,
            SUM(GTPU_UPLINK_THROUGHPUT) GTPU_UPLINK_THROUGHPUT,
                    SUM(GTPU_DOWNLINK_THROUGHPUT) GTPU_DOWNLINK_THROUGHPUT,
                    SUM(GTPU_UPLINK_THROUGHPUT_MAX) GTPU_UPLINK_THROUGHPUT_MAX,
                    SUM(GTPU_DOWNLINK_THROUGHPUT_MAX) GTPU_DOWNLINK_THROUGHPUT_MAX
            from
                    (
            select
                      trunc( p.period_start_time, 'hh24' ) period_start_time,
                    "fing".co_gid fing_gid,
                      AVG(GTPU_UPLINK_THROUGHPUT) GTPU_UPLINK_THROUGHPUT,
                    AVG(GTPU_DOWNLINK_THROUGHPUT) GTPU_DOWNLINK_THROUGHPUT,
                    MAX(GTPU_UPLINK_THROUGHPUT) GTPU_UPLINK_THROUGHPUT_MAX,
                    MAX(GTPU_DOWNLINK_THROUGHPUT) GTPU_DOWNLINK_THROUGHPUT_MAX
                    from
                      
                        utp_common_objects "plmn",
                        utp_common_objects "fing",
                        (
                          select
                             period_start_time,
                          "fing".co_gid fing_id,
                            SUM(GTPU_UPLINK_THROUGHPUT) GTPU_UPLINK_THROUGHPUT,
                          SUM(GTPU_DOWNLINK_THROUGHPUT) GTPU_DOWNLINK_THROUGHPUT
                          from
                              utp_common_objects "plmn",
                              utp_common_objects "fing",
                              PCOFNG_PS_GTPU_GTPU_RAW p
                            
                          where
                            "plmn".co_gid in ( '100000' ) 
                            and period_start_time >= to_date('2019/01/22 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                            and period_start_time < to_date('2019/01/23 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                            and "plmn".co_oc_id = 16
                            and "fing".co_gid = p.fing_id
                            and "fing".co_parent_gid = "plmn".co_gid
                            and "fing".co_oc_id = 3529
                          group by
                            p.period_start_time, 
                          "fing".co_gid              
                        ) p
                      
                    where
                      "plmn".co_gid in ( '100000' ) 
                      and period_start_time >= to_date('2019/01/22 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                      and period_start_time < to_date('2019/01/23 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                      and "plmn".co_oc_id = 16
                      and "fing".co_gid = p.fing_id
                      and "fing".co_parent_gid = "plmn".co_gid
                      and "fing".co_oc_id = 3529
                    group by
                      trunc( p.period_start_time, 'hh24' ),
                    "fing".co_gid
            ) a
            group by
            a.period_start_time,
                    a.fing_gid
 
        - >
            create global temporary table jf_SGWP_2320895304 on commit preserve rows as
              select
            a.period_start_time,
                    a.fing_gid,
            SUM(SM_NBR_ACT_SGW_BEAR) SM_NBR_ACT_SGW_BEAR
            from
                    (
            select
                      trunc( p.period_start_time, 'hh24' ) period_start_time,
                    "fing".co_gid fing_gid,
                      SUM(SM_NBR_ACT_SGW_BEAR) SM_NBR_ACT_SGW_BEAR
                    from
                      
                        utp_common_objects "plmn",
                        utp_common_objects "fing",
                      pcofng_ps_sgwp_sgwp_raw p
                    where
                      "plmn".co_gid in ( '100000' ) 
                      and period_start_time >= to_date('2019/01/22 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                      and period_start_time < to_date('2019/01/23 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                      and "plmn".co_oc_id = 16
                      and "fing".co_gid = p.fing_id
                      and "fing".co_parent_gid = "plmn".co_gid
                      and "fing".co_oc_id = 3529
                    group by
                      trunc( p.period_start_time, 'hh24' ),
                    "fing".co_gid
            ) a
            group by
            a.period_start_time,
                    a.fing_gid
        - >
            create global temporary table jf_OVLD_ext3_2323103242 on commit preserve rows as
            select
                    trunc( p.period_start_time, 'hh24' ) period_start_time,
                  "fing".co_gid fing_gid,
                    AVG(CASE WHEN FNODE_ID LIKE 'AS%_%' THEN (OLC_LOAD_LEVEL_AVE) ELSE NULL END) AVG_SB_CPU_USAGE,
                    MAX(CASE WHEN FNODE_ID LIKE 'AS%_%' THEN (OLC_LOAD_LEVEL_AVE) ELSE NULL END) AVG_SB_CPU_USAGE_MAX
                  from
                    
                      utp_common_objects "plmn",
                      utp_common_objects "fing",
                    pcofng_ps_ovld_ovld_raw p
                  where
                    "plmn".co_gid in ( '100000' ) 
                    and period_start_time >= to_date('2019/01/22 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                    and period_start_time < to_date('2019/01/23 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                    and "plmn".co_oc_id = 16
                    and "fing".co_gid = p.fing_id
                    and "fing".co_parent_gid = "plmn".co_gid
                    and "fing".co_oc_id = 3529
                  group by
                    trunc( p.period_start_time, 'hh24' ),
                  "fing".co_gid
        - >
            create global temporary table jf_SSPROF_23120406 on commit preserve rows as
              select
            a.period_start_time,
                    a.fing_gid,
            SUM(SM_NBR_ACT_BEAR_P_GW) SM_NBR_ACT_BEAR_P_GW,
                    SUM(SM_NBR_ACT_BEAR_SAE_GW) SM_NBR_ACT_BEAR_SAE_GW,
                    SUM(SM_NBR_ACT_DEDIC_BEAR_P_GW) SM_NBR_ACT_DEDIC_BEAR_P_GW,
                    SUM(SM_MAX_NBR_ACT_BEAR_P_GW) SM_MAX_NBR_ACT_BEAR_P_GW
            from
                    (
            select
                      trunc( p.period_start_time, 'hh24' ) period_start_time,
                    "fing".co_gid fing_gid,
                      SUM(SM_NBR_ACT_BEAR_P_GW) SM_NBR_ACT_BEAR_P_GW,
                    SUM(SM_NBR_ACT_BEAR_SAE_GW) SM_NBR_ACT_BEAR_SAE_GW,
                    SUM(SM_NBR_ACT_DEDIC_BEAR_P_GW) SM_NBR_ACT_DEDIC_BEAR_P_GW,
                    SUM(SM_MAX_NBR_ACT_BEAR_P_GW) SM_MAX_NBR_ACT_BEAR_P_GW
                    from
                      
                        utp_common_objects "plmn",
                        utp_common_objects "fing",
                      PCOFNG_PS_SSPROF_SSPROF_RAW p
                    where
                      "plmn".co_gid in ( '100000' ) 
                      and period_start_time >= to_date('2019/01/22 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                      and period_start_time < to_date('2019/01/23 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                      and "plmn".co_oc_id = 16
                      and "fing".co_gid = p.fing_id
                      and "fing".co_parent_gid = "plmn".co_gid
                      and "fing".co_oc_id = 3529
                    group by
                      trunc( p.period_start_time, 'hh24' ),
                    "fing".co_gid
            ) a
            group by
            a.period_start_time,
                    a.fing_gid
        - >
            create global temporary table jf_URPL_ext_2378625297 on commit preserve rows as
            select
                    trunc( p.period_start_time, 'hh24' ) period_start_time,
                  "fing".co_gid fing_gid,
                    AVG(CASE WHEN FNODE_ID LIKE 'SAB%_%' THEN UP_AVG_FASTPATH_CPU_LOAD ELSE NULL END) UP_AVG_FASTPATH_CPU_LOAD_SAB,
                    MAX(CASE WHEN FNODE_ID LIKE 'SAB%_%' THEN UP_AVG_FASTPATH_CPU_LOAD ELSE NULL END) UPAVGFASTPATHCPULOADSABMAX
                  from
                    
                      utp_common_objects "plmn",
                      utp_common_objects "fing",
                    pcofng_ps_urpl_usrplane_raw p
                  where
                    "plmn".co_gid in ( '100000' ) 
                    and period_start_time >= to_date('2019/01/22 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                    and period_start_time < to_date('2019/01/23 15:36:00', 'yyyy/mm/dd hh24:mi:ss')
                    and "plmn".co_oc_id = 16
                    and "fing".co_gid = p.fing_id
                    and "fing".co_parent_gid = "plmn".co_gid
                    and "fing".co_oc_id = 3529
                  group by
                    trunc( p.period_start_time, 'hh24' ),
                  "fing".co_gid
        - >
            create global temporary table jf_ALLTABLES_2322955188 on commit preserve rows as
              select
              period_start_time,
              fing_gid
            from
              (
                (
                  select
                    period_start_time, TO_CHAR(fing_gid) fing_gid
                  from
                    jf_GTPU_2339105747
                )
            UNION
                (
                  select
                    period_start_time, TO_CHAR(fing_gid) fing_gid
                  from
                    jf_OVLD_ext3_2323103242
                )
            UNION
                (
                  select
                    period_start_time, TO_CHAR(fing_gid) fing_gid
                  from
                    jf_SGWP_2320895304
                )
            UNION
                (
                  select
                    period_start_time, TO_CHAR(fing_gid) fing_gid
                  from
                    jf_SSPROF_23120406
                )
            UNION
                (
                  select
                    period_start_time, TO_CHAR(fing_gid) fing_gid
                  from
                    jf_URPL_ext_2378625297
                )
              ) p
      "select_temptable": >
            select
                to_char(ALLTABLES.period_start_time, 'yyyymmddhh24miss') period_start_time,
                nvl("fing".co_name, nvl("fing".co_object_instance, 'NN('||"fing".co_gid||')')) "FING name",
                decode("fing".co_sc_name, ' pgw','P-GW', 'pgw','P-GW', ' saegw', 'SAE-GW', 'saegw', 'SAE-GW', ' sgw', 'S-GW', 'sgw', 'S-GW', 'ggsn', 'GGSN', "fing".co_sc_name) "Mode",
                ALLTABLES.fing_gid, nvl("fing".co_ext_dn, "fing".co_dn) "DN",
                round(((ssprof.sm_nbr_act_bear_p_gw + ssprof.sm_nbr_act_bear_sae_gw)),0) flng_5032b,
                round(((ssprof.SM_MAX_NBR_ACT_BEAR_P_GW + ssprof.sm_nbr_act_bear_sae_gw)),0) flng_5032b1,
                round(to_number((nvl(sgwp.sm_nbr_act_sgw_bear,0) + nvl(ssprof.sm_nbr_act_bear_sae_gw,0))),0) flng_5031b,
                round(to_number((nvl(sgwp.SM_MAX_NBR_ACT_SGW_BEAR,0) + nvl(ssprof.sm_nbr_act_bear_sae_gw,0))),0) flng_5031b1,
                round(to_number((GTPU.GTPU_UPLINK_THROUGHPUT + GTPU.GTPU_DOWNLINK_THROUGHPUT))/1024/8,2) flng_5028a,
                round(to_number((GTPU.GTPU_UPLINK_THROUGHPUT_MAX + GTPU.GTPU_DOWNLINK_THROUGHPUT_MAX))/1024/8,2) flng_5028a1,
                round(to_number(decode(OVLD_ext3.AVG_SB_CPU_USAGE,0,NULL,OVLD_ext3.AVG_SB_CPU_USAGE)),2) flng_769c,
                round(to_number(decode(OVLD_ext3.AVG_SB_CPU_USAGE_MAX,0,NULL,OVLD_ext3.AVG_SB_CPU_USAGE_MAX)),2) flng_769c1,
                round(to_number(decode(URPL_ext.UP_AVG_FASTPATH_CPU_LOAD_SAB,0,NULL,URPL_ext.UP_AVG_FASTPATH_CPU_LOAD_SAB)),2) flng_805a,
                round(to_number(decode(URPL_ext.UPAVGFASTPATHCPULOADSABMAX,0,NULL,URPL_ext.UPAVGFASTPATHCPULOADSABMAX)),2) flng_805a1,
                round(ssprof.SM_NBR_ACT_DEDIC_BEAR_P_GW,0) flng_5032b
            from
                utp_common_objects "fing"  
                ,
              jf_ALLTABLES_2322955188 ALLTABLES,
              jf_GTPU_2339105747 GTPU,
              jf_OVLD_ext3_2323103242 OVLD_ext3,
              jf_SGWP_2320895304 SGWP,
              jf_SSPROF_23120406 SSPROF,
              jf_URPL_ext_2378625297 URPL_ext
            where
                ALLTABLES.fing_gid = "fing".co_gid
                and ALLTABLES.period_start_time = GTPU.period_start_time (+) and ALLTABLES.fing_gid = GTPU.fing_gid (+) 
                and ALLTABLES.period_start_time = OVLD_ext3.period_start_time (+) and ALLTABLES.fing_gid = OVLD_ext3.fing_gid (+) 
                and ALLTABLES.period_start_time = SGWP.period_start_time (+) and ALLTABLES.fing_gid = SGWP.fing_gid (+) 
                and ALLTABLES.period_start_time = SSPROF.period_start_time (+) and ALLTABLES.fing_gid = SSPROF.fing_gid (+) 
                and ALLTABLES.period_start_time = URPL_ext.period_start_time (+) and ALLTABLES.fing_gid = URPL_ext.fing_gid (+) 

                
            order by
                2,1,3
    "CMGUsers": 
      "temp_table": 
        - "jf_M11_2347546033"
        - "jf_ALLTABLES_2322955288"
      "create_temptable": 
        - >
            create global temporary table jf_M11_2347546033 on commit preserve rows as
            select
            trunc(a.period_start_time, 'hh24') period_start_time,
                    a.cmg_gid,
            AVG(period_duration) period_duration,
                    avg(giGnDlBytes) avggiGnDlBytes,
                    avg(giGpDlBytes) avggiGpDlBytes,
                    avg(giS1uDlBytes) avggiS1uDlBytes,
                    avg(giS5uDlBytes) avggiS5uDlBytes,
                    avg(giS8uDlBytes) avggiS8uDlBytes,
                    avg(gnGiUlBytes) avggnGiUlBytes,
                    avg(gpGiUlBytes) avggpGiUlBytes,
                    avg(s1uGiUlBytes) avgs1uGiUlBytes,
                    avg(s5uGiUlBytes) avgs5uGiUlBytes,
                    avg(s8uGiUlBytes) avgs8uGiUlBytes,
                    max(giGnDlBytes) maxgiGnDlBytes,
                    max(giGpDlBytes) maxgiGpDlBytes,
                    max(giS1uDlBytes) maxgiS1uDlBytes,
                    max(giS5uDlBytes) maxgiS5uDlBytes,
                    max(giS8uDlBytes) maxgiS8uDlBytes,
                    max(gnGiUlBytes) maxgnGiUlBytes,
                    max(gpGiUlBytes) maxgpGiUlBytes,
                    max(s1uGiUlBytes) maxs1uGiUlBytes,
                    max(s5uGiUlBytes) maxs5uGiUlBytes,
                    max(s8uGiUlBytes) maxs8uGiUlBytes
            from (
            select
                      p.period_start_time,
                    "cmg".co_gid cmg_gid,
                      avg(period_duration) period_duration,
                    SUM(giGnDlBytes) giGnDlBytes,
                    SUM(giGpDlBytes) giGpDlBytes,
                    SUM(giS1uDlBytes) giS1uDlBytes,
                    SUM(giS5uDlBytes) giS5uDlBytes,
                    SUM(giS8uDlBytes) giS8uDlBytes,
                    SUM(gnGiUlBytes) gnGiUlBytes,
                    SUM(gpGiUlBytes) gpGiUlBytes,
                    SUM(s1uGiUlBytes) s1uGiUlBytes,
                    SUM(s5uGiUlBytes) s5uGiUlBytes,
                    SUM(s8uGiUlBytes) s8uGiUlBytes
                    from
                      
                        utp_common_objects "plmn",
                        utp_common_objects "sam",
                        utp_common_objects "cmg",
                      epccmg_ps_m11_mda_raw p
                    where
                      "plmn".co_gid in ( '100000' ) 
                      and period_start_time >= to_date('2019/01/22 14:54:00', 'yyyy/mm/dd hh24:mi:ss')
                      and period_start_time < to_date('2019/01/22 15:54:00', 'yyyy/mm/dd hh24:mi:ss')
                      and "plmn".co_oc_id = 16
                      and "sam".co_gid = p.sam_id               
                      and "sam".co_parent_gid = "plmn".co_gid
                      and "sam".co_oc_id = 5273
                      and "cmg".co_gid = p.cmg_id               
                      and "cmg".co_parent_gid = "sam".co_gid
                      and "cmg".co_oc_id = 5313
                    group by
                      p.period_start_time,
                    "cmg".co_gid
                    ) a
            group by
            trunc(a.period_start_time, 'hh24'),
                    a.cmg_gid

        - >
            create global temporary table jf_ALLTABLES_2322955288 on commit preserve rows as
              select
              period_start_time,
              cmg_gid
            from
              (
                (
                  select
                    period_start_time, TO_CHAR(cmg_gid) cmg_gid
                  from
                    jf_M11_2347546033
                )           
              ) p

      "select_temptable": >
            select
              to_char(ALLTABLES.period_start_time, 'yyyymmddhh24miss') period_start_time,
              nvl("sam".co_name, nvl("sam".co_object_instance, 'NN('||"sam".co_gid||')')) "SAM name",
              nvl("cmg".co_name, nvl("cmg".co_object_instance, 'NN('||"cmg".co_gid||')')) "CMG name",
              ALLTABLES.cmg_gid, nvl("cmg".co_ext_dn, "cmg".co_dn) "DN",
              round(to_number(decode( (M11.period_duration*60*(1024*1024)), 0, NULL, ((M11.avggiS1uDlBytes+M11.avggiS5uDlBytes+M11.avggiS8uDlBytes+M11.avggiGnDlBytes+M11.avggiGpDlBytes+ M11.avgs1uGiUlBytes+M11.avgs5uGiUlBytes+M11.avgs8uGiUlBytes+M11.avggnGiUlBytes+M11.avggpGiUlBytes)) / (M11.period_duration*60*(1024*1024*1024)))),2) cmg_373a,
              round(to_number(decode( (M11.period_duration*60*(1024*1024)), 0, NULL, ((M11.maxgiS1uDlBytes+M11.maxgiS5uDlBytes+M11.maxgiS8uDlBytes+M11.maxgiGnDlBytes+M11.maxgiGpDlBytes+ M11.maxs1uGiUlBytes+M11.maxs5uGiUlBytes+M11.maxs8uGiUlBytes+M11.maxgnGiUlBytes+M11.maxgpGiUlBytes)) / (M11.period_duration*60*(1024*1024*1024)))),2) cmg_373a1
            from
              utp_common_objects "sam",
              utp_common_objects "cmg"
              ,
            jf_ALLTABLES_2322955288 ALLTABLES,
            jf_M11_2347546033 M11
            where
              "cmg".co_parent_gid = "sam".co_gid and
              ALLTABLES.cmg_gid = "cmg".co_gid
              and ALLTABLES.period_start_time = M11.period_start_time (+) and ALLTABLES.cmg_gid = M11.cmg_gid (+) 
             
            order by
              2,1,3,4


